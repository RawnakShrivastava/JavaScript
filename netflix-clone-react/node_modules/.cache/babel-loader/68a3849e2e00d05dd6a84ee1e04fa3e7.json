{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _web = require(\"@react-spring/web\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction TouchMoveRecord(e) {\n  var _getTouchPosition = (0, _utils.getTouchPosition)(e),\n      x = _getTouchPosition.x,\n      y = _getTouchPosition.y;\n\n  this.x = x;\n  this.y = y;\n  this.time = Date.now();\n}\n\nvar defaultProps = {\n  component: 'div',\n  cardSize: 320,\n  cardCount: 1,\n  cardPadCount: 2,\n  defaultCursor: 0,\n  loop: true,\n  autoplay: 0,\n  vertical: false,\n  renderCard: function renderCard() {},\n  precision: 0.001,\n  tension: 200,\n  friction: 25,\n  moveScale: 1,\n  onRest: function onRest() {},\n  onDragStart: function onDragStart() {},\n  onDragEnd: function onDragEnd() {},\n  onDragCancel: function onDragCancel() {},\n  maxOverflow: 0.5,\n  clickTolerance: 2,\n  ignoreCrossMove: true\n};\nvar propsKeys = Object.keys(defaultProps);\n\nvar TouchCarousel = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(TouchCarousel, _React$PureComponent);\n\n  var _super = _createSuper(TouchCarousel);\n\n  function TouchCarousel(props) {\n    var _this;\n\n    _classCallCheck(this, TouchCarousel);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onTouchStart\", function (e) {\n      var oldTouchCount = _this.touchCount;\n      _this.touchCount += e.changedTouches.length;\n\n      _this.setState({\n        active: true\n      });\n\n      _this.stopAutoplay();\n\n      _this.tracingTouchId = (0, _utils.getTouchId)(e);\n      _this.touchMoves = [new TouchMoveRecord(e)];\n      _this.isMovingCross = null;\n      var _this$props = _this.props,\n          cardSize = _this$props.cardSize,\n          clickTolerance = _this$props.clickTolerance; // User click a card before it's in place but near, allow the clicking.\n      // Otherwise it's only a grab.\n\n      _this.grabbing = cardSize * Math.abs(_this.usedCursor - _this.state.cursor) > clickTolerance; // When user clicks or grabs the scroll, cancel the spring effect.\n\n      if (!oldTouchCount) {\n        _this.setCursor(_this.usedCursor).then(_this.modCursor);\n      } else {\n        _this.modCursor();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTouchMove\", function (e) {\n      _this.grabbing = false;\n      var touchMove = new TouchMoveRecord(e);\n      var touchId = (0, _utils.getTouchId)(e);\n\n      if (touchId !== _this.tracingTouchId || !_this.touchMoves.length) {\n        _this.touchMoves = [touchMove];\n      }\n\n      _this.tracingTouchId = touchId;\n      var shouldIgnore = e.defaultPrevented;\n\n      if (!shouldIgnore && _this.state.active) {\n        if (_this.isMovingCross == null) {\n          var _this$props2 = _this.props,\n              _vertical = _this$props2.vertical,\n              ignoreCrossMove = _this$props2.ignoreCrossMove;\n          var factor = ignoreCrossMove;\n\n          if (typeof factor !== 'number') {\n            factor = factor ? 1 : 0;\n          }\n\n          var mainAxis = _vertical ? 'y' : 'x';\n          var crossAxis = _vertical ? 'x' : 'y';\n          var deltMain = Math.abs(touchMove[mainAxis] - _this.touchMoves[0][mainAxis]);\n          var deltCross = Math.abs(touchMove[crossAxis] - _this.touchMoves[0][crossAxis]);\n          _this.isMovingCross = deltCross * factor > deltMain;\n        }\n\n        shouldIgnore = _this.isMovingCross;\n      }\n\n      if (shouldIgnore) {\n        return;\n      } // Prevent the default action i.e. page scroll.\n      // NOTE: in Chrome 56+ touchmove event listeners are passive by default,\n      // please use CSS `touch-action` for it.\n\n\n      e.preventDefault();\n      var _this$props3 = _this.props,\n          cardSize = _this$props3.cardSize,\n          moveScale = _this$props3.moveScale,\n          vertical = _this$props3.vertical,\n          onDragStart = _this$props3.onDragStart;\n      var lastMove = _this.touchMoves[_this.touchMoves.length - 1];\n      var xy = vertical ? 'y' : 'x';\n      var distance = touchMove[xy] - lastMove[xy];\n\n      _this.setState({\n        dragging: true\n      }, _this.state.dragging ? undefined : onDragStart);\n\n      _this.setCursor(_this.state.cursor + distance / cardSize * moveScale);\n\n      _this.touchMoves.push(touchMove);\n\n      if (_this.touchMoves.length > 250) {\n        _this.touchMoves.splice(0, 50);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTouchEndOrCancel\", function (e) {\n      var type = e.type;\n      _this.touchCount -= e.changedTouches.length;\n\n      if (_this.touchCount > 0) {\n        _this.touchMoves = [];\n        return;\n      } // prevent click event for grab actions\n\n\n      if (_this.grabbing) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      var wasDragging = _this.state.dragging;\n      var targetCursor = null; // Due to multi-touch, records can be empty even if .dragging is true.\n      // So check both.\n\n      if (wasDragging && _this.touchMoves.length) {\n        var _this$props4 = _this.props,\n            cardSize = _this$props4.cardSize,\n            moveScale = _this$props4.moveScale,\n            vertical = _this$props4.vertical;\n        var friction = _this.props.friction / 1e6;\n\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            touchMoves = _assertThisInitialize.touchMoves;\n\n        var i = touchMoves.length;\n        var duration = 0;\n\n        while (--i >= 0 && duration < 100) {\n          duration = Date.now() - touchMoves[i].time;\n        }\n\n        i++;\n        var xy = vertical ? 'y' : 'x';\n        var touchMoveVelocity = ((0, _utils.getTouchPosition)(e)[xy] - touchMoves[i][xy]) / duration;\n        var momentumDistance = touchMoveVelocity * Math.abs(touchMoveVelocity) / friction / 2;\n        var cursor = _this.state.cursor;\n        var cursorDelta = (0, _utils.clamp)(momentumDistance / cardSize * moveScale, Math.floor(cursor) - cursor, Math.ceil(cursor) - cursor);\n        targetCursor = Math.round(cursor + cursorDelta);\n        _this.touchMoves = [];\n      } else {\n        // User grabs and then releases without any move in between.\n        // Snap the cursor.\n        targetCursor = Math.round(_this.state.cursor);\n      }\n\n      _this.setState({\n        active: false,\n        dragging: false\n      }, function () {\n        _this.setCursor(targetCursor);\n\n        if (wasDragging) {\n          _this.props[type === 'touchend' ? 'onDragEnd' : 'onDragCancel']();\n        }\n      });\n\n      _this.tracingTouchId = null;\n\n      _this.autoplayIfEnabled();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSpringRest\", function () {\n      if (!_this.shouldEnableSpring()) return;\n\n      _this.setState({\n        springing: false\n      });\n\n      var cursor = Math.round(_this.usedCursor);\n      var index = -cursor;\n      var modIndex = index % _this.props.cardCount;\n\n      while (modIndex < 0) {\n        modIndex += _this.props.cardCount;\n      }\n\n      _this.props.onRest(index, modIndex, cursor, _this.state);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"autoplayIfEnabled\", function () {\n      if (_this.props.autoplay) {\n        _this.autoplayTimer = setInterval(_this.next, _this.props.autoplay);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopAutoplay\", function () {\n      if (_this.autoplayTimer) {\n        clearInterval(_this.autoplayTimer);\n        _this.autoplayTimer = null;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"go\", function (n) {\n      return _this.modCursor().then(function () {\n        // n must be in range here.\n        // That's why next()/prev() don't use this method.\n        _this.setCursor(n);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"next\", function () {\n      return _this.modCursor().then(function () {\n        _this.setCursor(_this.state.cursor - 1);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"prev\", function () {\n      return _this.modCursor().then(function () {\n        _this.setCursor(_this.state.cursor + 1);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCursor\", function (cursor) {\n      var springing = _this.shouldEnableSpring() && cursor !== _this.state.cursor;\n\n      return new Promise(function (resolve) {\n        _this.setState({\n          cursor: cursor,\n          springing: springing\n        }, resolve);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modAs\", function (cursor) {\n      return new Promise(function (resolve) {\n        _this.setState({\n          moding: true,\n          cursor: cursor\n        }, function () {\n          _this.setState({\n            moding: false\n          }, resolve);\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modCursor\", function () {\n      return new Promise(function (resolve) {\n        var _this$props5 = _this.props,\n            loop = _this$props5.loop,\n            cardCount = _this$props5.cardCount;\n\n        if (!loop) {\n          return resolve();\n        }\n\n        var cursor = _this.state.cursor;\n        var newCursor = (0, _utils.modCursor)(cursor, cardCount);\n\n        if (newCursor !== cursor) {\n          _this.modAs(newCursor).then(resolve);\n        } else {\n          resolve();\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shouldEnableSpring\", function () {\n      var _this$state = _this.state,\n          active = _this$state.active,\n          moding = _this$state.moding;\n      return !active && !moding;\n    });\n\n    _this.wrapSubComponents(props);\n\n    _this.state = {\n      // hack: add MIN_VALUE or react-spring v9 fails autoplay\n      cursor: props.defaultCursor + Number.MIN_VALUE,\n      active: false,\n      dragging: false,\n      springing: false,\n      moding: false\n    };\n    _this.usedCursor = 0;\n    _this.touchCount = 0;\n    _this.touchMoves = [];\n    _this.autoplayTimer = null;\n    _this.grabbing = false;\n    _this.tracingTouchId = null;\n    _this.isMovingCross = null;\n    return _this;\n  }\n\n  _createClass(TouchCarousel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.autoplayIfEnabled();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.autoplay !== this.props.autoplay) {\n        this.stopAutoplay();\n        this.autoplayIfEnabled();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopAutoplay();\n    }\n  }, {\n    key: \"wrapSubComponents\",\n    value: function wrapSubComponents(props) {\n      var _this2 = this;\n\n      this.AnimatedComponent = (0, _web.animated)(props.component);\n\n      var wrappedCard = function wrappedCard(_ref) {\n        var index = _ref.index,\n            modIndex = _ref.modIndex,\n            cursor = _ref.cursor,\n            state = _ref.state;\n        _this2.usedCursor = cursor;\n        return _this2.props.renderCard(index, modIndex, cursor, state);\n      };\n\n      this.AnimatedCard = (0, _web.animated)(wrappedCard);\n    }\n  }, {\n    key: \"getCursor\",\n    value: function getCursor() {\n      return this.state.cursor;\n    }\n  }, {\n    key: \"getComputedCursor\",\n    value: function getComputedCursor() {\n      var _this$props6 = this.props,\n          cardCount = _this$props6.cardCount,\n          loop = _this$props6.loop,\n          maxOverflow = _this$props6.maxOverflow;\n      var _this$state2 = this.state,\n          cursor = _this$state2.cursor,\n          dragging = _this$state2.dragging;\n      var computedCursor = cursor;\n\n      if (!loop) {\n        computedCursor = (0, _utils.clamp)(computedCursor, 1 - cardCount, 0);\n\n        if (dragging && cursor > 0) {\n          computedCursor = maxOverflow - maxOverflow / (cursor + 1);\n        } else if (dragging && cursor < 1 - cardCount) {\n          computedCursor = 1 - cardCount - maxOverflow + maxOverflow / (1 - cardCount - cursor + 1);\n        }\n      }\n\n      return computedCursor;\n    }\n  }, {\n    key: \"getUsedCursor\",\n    value: function getUsedCursor() {\n      return this.usedCursor;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var AnimatedComponent = this.AnimatedComponent,\n          AnimatedCard = this.AnimatedCard;\n\n      var _this$props7 = this.props,\n          cardSize = _this$props7.cardSize,\n          cardCount = _this$props7.cardCount,\n          cardPadCount = _this$props7.cardPadCount,\n          renderCard = _this$props7.renderCard,\n          tension = _this$props7.tension,\n          friction = _this$props7.friction,\n          precision = _this$props7.precision,\n          loop = _this$props7.loop,\n          rest = _objectWithoutProperties(_this$props7, [\"cardSize\", \"cardCount\", \"cardPadCount\", \"renderCard\", \"tension\", \"friction\", \"precision\", \"loop\"]);\n\n      var padCount = loop ? cardPadCount : 0;\n      var springConfig = {\n        tension: tension,\n        friction: friction,\n        precision: precision\n      };\n      var computedCursor = this.getComputedCursor();\n      return /*#__PURE__*/_react[\"default\"].createElement(_web.Spring, {\n        config: springConfig,\n        from: {\n          cursor: computedCursor\n        },\n        immediate: !this.shouldEnableSpring(),\n        to: {\n          cursor: computedCursor\n        },\n        onRest: this.onSpringRest\n      }, function (_ref2) {\n        var cursor = _ref2.cursor;\n        return /*#__PURE__*/_react[\"default\"].createElement(AnimatedComponent, _extends({}, (0, _utils.omit)(rest, propsKeys), {\n          cursor: cursor,\n          carouselState: _this3.state,\n          onTouchStart: _this3.onTouchStart,\n          onTouchMove: _this3.onTouchMove,\n          onTouchEnd: _this3.onTouchEndOrCancel,\n          onTouchCancel: _this3.onTouchEndOrCancel\n        }), (0, _utils.range)(0 - padCount, cardCount - 1 + padCount).map(function (index) {\n          var modIndex = index % cardCount;\n\n          while (modIndex < 0) {\n            modIndex += cardCount;\n          }\n\n          return /*#__PURE__*/_react[\"default\"].createElement(AnimatedCard, {\n            key: index,\n            index: index,\n            modIndex: modIndex,\n            cursor: cursor,\n            state: _this3.state\n          });\n        }));\n      });\n    }\n  }]);\n\n  return TouchCarousel;\n}(_react[\"default\"].PureComponent);\n\nTouchCarousel.defaultProps = defaultProps;\nvar _default = TouchCarousel;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["C:/Users/rshrivastava/workspace/js/netflix-clone-react/node_modules/react-touch-carousel/lib/TouchCarousel.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","_react","_interopRequireDefault","require","_web","_utils","__esModule","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_defineProperty","TouchMoveRecord","_getTouchPosition","getTouchPosition","x","y","time","Date","now","defaultProps","component","cardSize","cardCount","cardPadCount","defaultCursor","loop","autoplay","vertical","renderCard","precision","tension","friction","moveScale","onRest","onDragStart","onDragEnd","onDragCancel","maxOverflow","clickTolerance","ignoreCrossMove","propsKeys","TouchCarousel","_React$PureComponent","_super","_this","oldTouchCount","touchCount","changedTouches","setState","active","stopAutoplay","tracingTouchId","getTouchId","touchMoves","isMovingCross","_this$props","grabbing","Math","abs","usedCursor","state","cursor","setCursor","then","modCursor","touchMove","touchId","shouldIgnore","defaultPrevented","_this$props2","_vertical","factor","mainAxis","crossAxis","deltMain","deltCross","preventDefault","_this$props3","lastMove","xy","distance","dragging","undefined","push","splice","type","stopPropagation","wasDragging","targetCursor","_this$props4","_assertThisInitialize","duration","touchMoveVelocity","momentumDistance","cursorDelta","clamp","floor","ceil","round","autoplayIfEnabled","shouldEnableSpring","springing","index","modIndex","autoplayTimer","setInterval","next","clearInterval","n","Promise","resolve","moding","_this$props5","newCursor","modAs","_this$state","wrapSubComponents","Number","MIN_VALUE","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","_this2","AnimatedComponent","animated","wrappedCard","_ref","AnimatedCard","getCursor","getComputedCursor","_this$props6","_this$state2","computedCursor","getUsedCursor","render","_this3","_this$props7","rest","padCount","springConfig","createElement","Spring","config","from","immediate","to","onSpringRest","_ref2","omit","carouselState","onTouchStart","onTouchMove","onTouchEnd","onTouchEndOrCancel","onTouchCancel","range","map","PureComponent","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _web = require(\"@react-spring/web\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction TouchMoveRecord(e) {\n  var _getTouchPosition = (0, _utils.getTouchPosition)(e),\n      x = _getTouchPosition.x,\n      y = _getTouchPosition.y;\n\n  this.x = x;\n  this.y = y;\n  this.time = Date.now();\n}\n\nvar defaultProps = {\n  component: 'div',\n  cardSize: 320,\n  cardCount: 1,\n  cardPadCount: 2,\n  defaultCursor: 0,\n  loop: true,\n  autoplay: 0,\n  vertical: false,\n  renderCard: function renderCard() {},\n  precision: 0.001,\n  tension: 200,\n  friction: 25,\n  moveScale: 1,\n  onRest: function onRest() {},\n  onDragStart: function onDragStart() {},\n  onDragEnd: function onDragEnd() {},\n  onDragCancel: function onDragCancel() {},\n  maxOverflow: 0.5,\n  clickTolerance: 2,\n  ignoreCrossMove: true\n};\nvar propsKeys = Object.keys(defaultProps);\n\nvar TouchCarousel = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(TouchCarousel, _React$PureComponent);\n\n  var _super = _createSuper(TouchCarousel);\n\n  function TouchCarousel(props) {\n    var _this;\n\n    _classCallCheck(this, TouchCarousel);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onTouchStart\", function (e) {\n      var oldTouchCount = _this.touchCount;\n      _this.touchCount += e.changedTouches.length;\n\n      _this.setState({\n        active: true\n      });\n\n      _this.stopAutoplay();\n\n      _this.tracingTouchId = (0, _utils.getTouchId)(e);\n      _this.touchMoves = [new TouchMoveRecord(e)];\n      _this.isMovingCross = null;\n      var _this$props = _this.props,\n          cardSize = _this$props.cardSize,\n          clickTolerance = _this$props.clickTolerance; // User click a card before it's in place but near, allow the clicking.\n      // Otherwise it's only a grab.\n\n      _this.grabbing = cardSize * Math.abs(_this.usedCursor - _this.state.cursor) > clickTolerance; // When user clicks or grabs the scroll, cancel the spring effect.\n\n      if (!oldTouchCount) {\n        _this.setCursor(_this.usedCursor).then(_this.modCursor);\n      } else {\n        _this.modCursor();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTouchMove\", function (e) {\n      _this.grabbing = false;\n      var touchMove = new TouchMoveRecord(e);\n      var touchId = (0, _utils.getTouchId)(e);\n\n      if (touchId !== _this.tracingTouchId || !_this.touchMoves.length) {\n        _this.touchMoves = [touchMove];\n      }\n\n      _this.tracingTouchId = touchId;\n      var shouldIgnore = e.defaultPrevented;\n\n      if (!shouldIgnore && _this.state.active) {\n        if (_this.isMovingCross == null) {\n          var _this$props2 = _this.props,\n              _vertical = _this$props2.vertical,\n              ignoreCrossMove = _this$props2.ignoreCrossMove;\n          var factor = ignoreCrossMove;\n\n          if (typeof factor !== 'number') {\n            factor = factor ? 1 : 0;\n          }\n\n          var mainAxis = _vertical ? 'y' : 'x';\n          var crossAxis = _vertical ? 'x' : 'y';\n          var deltMain = Math.abs(touchMove[mainAxis] - _this.touchMoves[0][mainAxis]);\n          var deltCross = Math.abs(touchMove[crossAxis] - _this.touchMoves[0][crossAxis]);\n          _this.isMovingCross = deltCross * factor > deltMain;\n        }\n\n        shouldIgnore = _this.isMovingCross;\n      }\n\n      if (shouldIgnore) {\n        return;\n      } // Prevent the default action i.e. page scroll.\n      // NOTE: in Chrome 56+ touchmove event listeners are passive by default,\n      // please use CSS `touch-action` for it.\n\n\n      e.preventDefault();\n      var _this$props3 = _this.props,\n          cardSize = _this$props3.cardSize,\n          moveScale = _this$props3.moveScale,\n          vertical = _this$props3.vertical,\n          onDragStart = _this$props3.onDragStart;\n      var lastMove = _this.touchMoves[_this.touchMoves.length - 1];\n      var xy = vertical ? 'y' : 'x';\n      var distance = touchMove[xy] - lastMove[xy];\n\n      _this.setState({\n        dragging: true\n      }, _this.state.dragging ? undefined : onDragStart);\n\n      _this.setCursor(_this.state.cursor + distance / cardSize * moveScale);\n\n      _this.touchMoves.push(touchMove);\n\n      if (_this.touchMoves.length > 250) {\n        _this.touchMoves.splice(0, 50);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTouchEndOrCancel\", function (e) {\n      var type = e.type;\n      _this.touchCount -= e.changedTouches.length;\n\n      if (_this.touchCount > 0) {\n        _this.touchMoves = [];\n        return;\n      } // prevent click event for grab actions\n\n\n      if (_this.grabbing) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      var wasDragging = _this.state.dragging;\n      var targetCursor = null; // Due to multi-touch, records can be empty even if .dragging is true.\n      // So check both.\n\n      if (wasDragging && _this.touchMoves.length) {\n        var _this$props4 = _this.props,\n            cardSize = _this$props4.cardSize,\n            moveScale = _this$props4.moveScale,\n            vertical = _this$props4.vertical;\n        var friction = _this.props.friction / 1e6;\n\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            touchMoves = _assertThisInitialize.touchMoves;\n\n        var i = touchMoves.length;\n        var duration = 0;\n\n        while (--i >= 0 && duration < 100) {\n          duration = Date.now() - touchMoves[i].time;\n        }\n\n        i++;\n        var xy = vertical ? 'y' : 'x';\n        var touchMoveVelocity = ((0, _utils.getTouchPosition)(e)[xy] - touchMoves[i][xy]) / duration;\n        var momentumDistance = touchMoveVelocity * Math.abs(touchMoveVelocity) / friction / 2;\n        var cursor = _this.state.cursor;\n        var cursorDelta = (0, _utils.clamp)(momentumDistance / cardSize * moveScale, Math.floor(cursor) - cursor, Math.ceil(cursor) - cursor);\n        targetCursor = Math.round(cursor + cursorDelta);\n        _this.touchMoves = [];\n      } else {\n        // User grabs and then releases without any move in between.\n        // Snap the cursor.\n        targetCursor = Math.round(_this.state.cursor);\n      }\n\n      _this.setState({\n        active: false,\n        dragging: false\n      }, function () {\n        _this.setCursor(targetCursor);\n\n        if (wasDragging) {\n          _this.props[type === 'touchend' ? 'onDragEnd' : 'onDragCancel']();\n        }\n      });\n\n      _this.tracingTouchId = null;\n\n      _this.autoplayIfEnabled();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSpringRest\", function () {\n      if (!_this.shouldEnableSpring()) return;\n\n      _this.setState({\n        springing: false\n      });\n\n      var cursor = Math.round(_this.usedCursor);\n      var index = -cursor;\n      var modIndex = index % _this.props.cardCount;\n\n      while (modIndex < 0) {\n        modIndex += _this.props.cardCount;\n      }\n\n      _this.props.onRest(index, modIndex, cursor, _this.state);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"autoplayIfEnabled\", function () {\n      if (_this.props.autoplay) {\n        _this.autoplayTimer = setInterval(_this.next, _this.props.autoplay);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopAutoplay\", function () {\n      if (_this.autoplayTimer) {\n        clearInterval(_this.autoplayTimer);\n        _this.autoplayTimer = null;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"go\", function (n) {\n      return _this.modCursor().then(function () {\n        // n must be in range here.\n        // That's why next()/prev() don't use this method.\n        _this.setCursor(n);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"next\", function () {\n      return _this.modCursor().then(function () {\n        _this.setCursor(_this.state.cursor - 1);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"prev\", function () {\n      return _this.modCursor().then(function () {\n        _this.setCursor(_this.state.cursor + 1);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCursor\", function (cursor) {\n      var springing = _this.shouldEnableSpring() && cursor !== _this.state.cursor;\n\n      return new Promise(function (resolve) {\n        _this.setState({\n          cursor: cursor,\n          springing: springing\n        }, resolve);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modAs\", function (cursor) {\n      return new Promise(function (resolve) {\n        _this.setState({\n          moding: true,\n          cursor: cursor\n        }, function () {\n          _this.setState({\n            moding: false\n          }, resolve);\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modCursor\", function () {\n      return new Promise(function (resolve) {\n        var _this$props5 = _this.props,\n            loop = _this$props5.loop,\n            cardCount = _this$props5.cardCount;\n\n        if (!loop) {\n          return resolve();\n        }\n\n        var cursor = _this.state.cursor;\n        var newCursor = (0, _utils.modCursor)(cursor, cardCount);\n\n        if (newCursor !== cursor) {\n          _this.modAs(newCursor).then(resolve);\n        } else {\n          resolve();\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shouldEnableSpring\", function () {\n      var _this$state = _this.state,\n          active = _this$state.active,\n          moding = _this$state.moding;\n      return !active && !moding;\n    });\n\n    _this.wrapSubComponents(props);\n\n    _this.state = {\n      // hack: add MIN_VALUE or react-spring v9 fails autoplay\n      cursor: props.defaultCursor + Number.MIN_VALUE,\n      active: false,\n      dragging: false,\n      springing: false,\n      moding: false\n    };\n    _this.usedCursor = 0;\n    _this.touchCount = 0;\n    _this.touchMoves = [];\n    _this.autoplayTimer = null;\n    _this.grabbing = false;\n    _this.tracingTouchId = null;\n    _this.isMovingCross = null;\n    return _this;\n  }\n\n  _createClass(TouchCarousel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.autoplayIfEnabled();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.autoplay !== this.props.autoplay) {\n        this.stopAutoplay();\n        this.autoplayIfEnabled();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopAutoplay();\n    }\n  }, {\n    key: \"wrapSubComponents\",\n    value: function wrapSubComponents(props) {\n      var _this2 = this;\n\n      this.AnimatedComponent = (0, _web.animated)(props.component);\n\n      var wrappedCard = function wrappedCard(_ref) {\n        var index = _ref.index,\n            modIndex = _ref.modIndex,\n            cursor = _ref.cursor,\n            state = _ref.state;\n        _this2.usedCursor = cursor;\n        return _this2.props.renderCard(index, modIndex, cursor, state);\n      };\n\n      this.AnimatedCard = (0, _web.animated)(wrappedCard);\n    }\n  }, {\n    key: \"getCursor\",\n    value: function getCursor() {\n      return this.state.cursor;\n    }\n  }, {\n    key: \"getComputedCursor\",\n    value: function getComputedCursor() {\n      var _this$props6 = this.props,\n          cardCount = _this$props6.cardCount,\n          loop = _this$props6.loop,\n          maxOverflow = _this$props6.maxOverflow;\n      var _this$state2 = this.state,\n          cursor = _this$state2.cursor,\n          dragging = _this$state2.dragging;\n      var computedCursor = cursor;\n\n      if (!loop) {\n        computedCursor = (0, _utils.clamp)(computedCursor, 1 - cardCount, 0);\n\n        if (dragging && cursor > 0) {\n          computedCursor = maxOverflow - maxOverflow / (cursor + 1);\n        } else if (dragging && cursor < 1 - cardCount) {\n          computedCursor = 1 - cardCount - maxOverflow + maxOverflow / (1 - cardCount - cursor + 1);\n        }\n      }\n\n      return computedCursor;\n    }\n  }, {\n    key: \"getUsedCursor\",\n    value: function getUsedCursor() {\n      return this.usedCursor;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var AnimatedComponent = this.AnimatedComponent,\n          AnimatedCard = this.AnimatedCard;\n\n      var _this$props7 = this.props,\n          cardSize = _this$props7.cardSize,\n          cardCount = _this$props7.cardCount,\n          cardPadCount = _this$props7.cardPadCount,\n          renderCard = _this$props7.renderCard,\n          tension = _this$props7.tension,\n          friction = _this$props7.friction,\n          precision = _this$props7.precision,\n          loop = _this$props7.loop,\n          rest = _objectWithoutProperties(_this$props7, [\"cardSize\", \"cardCount\", \"cardPadCount\", \"renderCard\", \"tension\", \"friction\", \"precision\", \"loop\"]);\n\n      var padCount = loop ? cardPadCount : 0;\n      var springConfig = {\n        tension: tension,\n        friction: friction,\n        precision: precision\n      };\n      var computedCursor = this.getComputedCursor();\n      return /*#__PURE__*/_react[\"default\"].createElement(_web.Spring, {\n        config: springConfig,\n        from: {\n          cursor: computedCursor\n        },\n        immediate: !this.shouldEnableSpring(),\n        to: {\n          cursor: computedCursor\n        },\n        onRest: this.onSpringRest\n      }, function (_ref2) {\n        var cursor = _ref2.cursor;\n        return /*#__PURE__*/_react[\"default\"].createElement(AnimatedComponent, _extends({}, (0, _utils.omit)(rest, propsKeys), {\n          cursor: cursor,\n          carouselState: _this3.state,\n          onTouchStart: _this3.onTouchStart,\n          onTouchMove: _this3.onTouchMove,\n          onTouchEnd: _this3.onTouchEndOrCancel,\n          onTouchCancel: _this3.onTouchEndOrCancel\n        }), (0, _utils.range)(0 - padCount, cardCount - 1 + padCount).map(function (index) {\n          var modIndex = index % cardCount;\n\n          while (modIndex < 0) {\n            modIndex += cardCount;\n          }\n\n          return /*#__PURE__*/_react[\"default\"].createElement(AnimatedCard, {\n            key: index,\n            index: index,\n            modIndex: modIndex,\n            cursor: cursor,\n            state: _this3.state\n          });\n        }));\n      });\n    }\n  }]);\n\n  return TouchCarousel;\n}(_react[\"default\"].PureComponent);\n\nTouchCarousel.defaultProps = defaultProps;\nvar _default = TouchCarousel;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}